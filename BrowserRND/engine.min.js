function engine_play(n){engineHelper.log(n);engine.play(n)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(n){for(var t=this;t;){if(t.matches(n))return t;t=t.parentElement}});var engineHelper=function(n){var t=function(t){try{n.external.PushRecordSteps(JSON.stringify(t))}catch(i){console.error(i)}},i=function(t){try{n.external.PushAllRecordSteps(JSON.stringify(t))}catch(i){console.error(i)}},r=function(){try{var i=n.external.Play()}catch(t){return console.error(t),[]}},u=function(t){console.log(t);try{n.external.log(t)}catch(i){console.error(i)}},f=function(t){console.log(t);try{n.external.ElementSelector(t)}catch(i){console.error(i)}};return{addStep:t,addSteps:i,play:r,log:u,showSelector:f}}(window),engine=function(n,t){var i=[],f=function(n){var u=r(n.target);i.push({action:"click",selector:u});t.addSteps(i)},e=function(n){n.preventDefault();var u=r(n.target);i.push({action:"submit",selector:u});t.addSteps(i)},o=function(n){var u="click",f=r(n.target);n.target.type==="submit"&&n.target.form!=undefined&&(u="submit",f=r(n.target.form));i.push({action:u,selector:f});t.addSteps(i)},a=function(n){var i=window.event?event:n;if(t.log("Keydown :: "+i.keyCode),i.ctrlKey&&i.altKey)switch(i.keyCode){case 82:h();break;case 83:c();break;case 80:v()}},s=function(n){var e,f,u;for(t.log("_keyPressRecord"+n.target.tagName),e=r(n.target),t.log("_keyPressRecord target "+e),f=-1,u=0;u<i.length;++u)if(i[u].action=="input"&&i[u].selector==e){f=u;break}t.log("_keyPressRecord :: "+f);f==-1?i.push({action:"input",selector:e,value:n.target.value}):i[f].value=n.target.value;t.log("_keyPressRecord");t.addSteps(i)},h=function(){i=[];n.addEventListener("keydown",s);n.addEventListener("click",f);n.addEventListener("mousedown",o);var t=n.querySelectorAll("form");for(let n=0;n<t.length;n++){const i=t[n];i.addEventListener("submit",e)}},c=function(){n.removeEventListener("click",f);n.removeEventListener("keydown",s);n.removeEventListener("mousedown",o);var i=n.querySelectorAll("form");for(let n=0;n<i.length;n++){const t=i[n];t.addEventListener("submit",e)}t.addSteps(u());t.log("Recorded",u())},u=function(){return i},v=function(){t.log("call play action");t.play()},y=function(r){t.log(r);i=JSON.parse(r);i.forEach(function(i){t.log(i.action+" :: "+i.selector);switch(i.action){case"submit":setTimeout(function(){n.querySelector(i.selector).submit()},0);break;case"click":setTimeout(function(){t.log(i.action+"2000 :: "+i.selector);window.document.querySelector(i.selector).click()},2e3);break;case"input":setTimeout(function(){n.querySelector(i.selector).value=i.value},0)}})},r=function(n){var t,i;return n.tagName=="HTML"|"Body"?n.tagName:(t=[],t.push(n.tagName),t=t.concat(p(n.attributes)),i=w(t),typeof i=="string")?i:r(n.parentElement)+" "+i[0]},p=function(n){for(var t=[],i=0;i<n.length;i++){const r=n[i];if(r.name=="id"){t.push("#"+r.value);continue}if(r.name=="class"){t.push("."+r.value.split(" ").join("."));continue}r.value?t.push("["+r.name+"='"+r.value+"']"):t.push("["+r.name+"]")}return t},w=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(n.querySelectorAll(r).length==1)return r}var i=t.join("");if(n.querySelectorAll(i).length==1)return i;const t=[];for(let r=0;r<n.querySelectorAll(i).length;r++){const u=n.querySelectorAll(i).length[r];t.push(i)}return t},b=function(){return n.querySelector("form input").closest("#q123").innerHTML},l=function(){let t=n.createElement("div"),i=n.createElement("style");t.innerHTML="<div id='test-auto-too'>\n        <label>[CTRL + ALT + R] = Record<\/label>\n        <br/>\n        <label> [CTRL + ALT + S] = Stop <\/label>\n        <br/>\n        <label> [CTRL + ALT + P] = Play <\/label>\n    <\/div>";i.innerHTML="#test-auto-too {display: block;position: fixed;opacity: 0.5;bottom: 20px;right: 20px;padding: 20px;} #test-auto-too:hover {opacity: 1;border: 1px solid blue;}";n.body&&(n.body.appendChild(t),n.body.appendChild(i))};return n.addEventListener("mouseover",function(n){var i=r(n.target);t.showSelector(i)}),window.addEventListener("load",function(){n.readyState==="complete"&&l()}),n.addEventListener("keydown",a),l(),{getHits:u,play:y,record:h,stop:c}}(window.document,engineHelper);